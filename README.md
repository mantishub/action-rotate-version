# MantisHub Next Version GitHub Action
One pattern is to always have the next release be named “vNext” and renaming such release to theappropriate name when released and then creating a new “vNext”. It should be possible to implement such pattern.
This GitHub Action automates the process of updating an existing version `(vNext)` to the current release version in MantisHub and creating a new release version `(vNext)` for future use.

### Usage
To use this action in your GitHub workflow, add the following step to your workflow file:
```yaml
jobs:
  rotate-version:
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v4
        with:
          repository: vboctor/action-rotate-version
      - name: Run Rotate Version Action
        id: rotate-version
        uses: vboctor/action-rotate-version@v1
        with:
          url: https://example.mantishub.io
          api-key: ${{ secrets.API_KEY }}
          project: 'MyProject'
          placeholder-name: 'vNext'
          release-name: ${{ inputs.TAG_NAME }}
          next-release-in-days: 7
```
This will do the following:

- Rename `vNext` to `{{tag-name}}` and mark it as released by setting `released = true` and `release-date = now`
- Create a new `vNext` release with `release-date` of `now + 7` days and `released = false` and `obsolete = false`.


### Example workflow file
This workflow demonstrates how to use the action-rotate-version in a GitHub Actions pipeline to update an existing release version and create a new one in a MantisHub project. The workflow checks out the code, runs the custom action, and retrieves the new version ID, showcasing effective version management automation.
#### Using Step ID to Fetch Outputs in GitHub Actions
In GitHub Actions, you can use the id field to assign a unique identifier to a step within a job. This identifier allows you to reference the outputs of that step in subsequent steps within the same job.
For example, in the workflow below, the step Run Rotate Version Action is assigned the ID rotate-version. Later, the output version-id generated by this step can be accessed using the syntax `${{ steps.rotate-version.outputs.version-id }`} in the Get new version id step.

```yaml
name: "MantisHub Example Workflow"

on:
  workflow_dispatch:
jobs:
  rotate-version:
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v4
        with:
          repository: vboctor/action-rotate-version
      - name: Run Rotate Version Action
        id: rotate-version
        uses: vboctor/action-rotate-version@v1
        with:
          url: 'https://example.mantishub.io'
          api-key: {{some-token}}
          project: 'MyProject'
          placeholder-name: 'vNext'
          release-name: "1.19.0"
          next-release-in-days: 7
      - name: Get new version id 
        run: echo  ${{ steps.rotate-version.outputs.version-id }}
```
